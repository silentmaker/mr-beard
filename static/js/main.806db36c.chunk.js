(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/sprite-beards.bc1de142.png"},function(e,t,n){e.exports=n(23)},,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(7),i=n.n(o),r=n(1),s=n(2),l=n(4),u=n(3),d=n(5),h=(n(15),n(8)),f=n.n(h),m=new Image;m.src=f.a;var v=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1,isInfo:!1,isSupported:!1,isCapture:!1,screenshot:""},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.mediaStream=null,this.faceDetector=window.FaceDetector?new window.FaceDetector:null,this.video=this.refs.cameraVideo,this.canvas=this.refs.cameraCanvas,this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.setState({isSupported:this.faceDetector})}},{key:"openCamera",value:function(){var e=this;window.navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then(function(t){var n=e.video;n.onloadedmetadata=function(){n.play(),requestAnimationFrame(function(){return e.detectFace()})},n.srcObject=t,e.setState({isOpen:!0}),e.mediaStream=t}).catch(function(e){console.log("".concat(e.name,": ").concat(e.message))})}},{key:"detectFace",value:function(){var e=this;this.faceDetector&&this.faceDetector.detect(this.refs.cameraVideo).then(function(t){var n=e.canvas,a=e.video,c=e.ctx,o=e.state.isCapture,i=e.props.beard;c.clearRect(0,0,n.width,n.height),t.forEach(function(t){var r=t.boundingBox.height;t.landmarks.forEach(function(t){if("mouth"===t.type){var s=t.locations[0],l=s.x,u=s.y;o&&c.drawImage(a,0,0,a.clientWidth,a.clientHeight),c.drawImage(m,2*-i.x,2*-i.y,150,80,l-75,u-r/200*80,150,80),o&&e.setState({isCapture:!1,screenshot:n.toDataURL("image/png")})}})}),e.state.isOpen&&requestAnimationFrame(function(){return e.detectFace()})}).catch(function(e){console.log("".concat(e.name,": ").concat(e.message))})}},{key:"closeCamera",value:function(){this.mediaStream&&(this.mediaStream.getTracks().forEach(function(e){return e.stop()}),this.setState({isOpen:!1}))}},{key:"captureCamera",value:function(){this.setState({isCapture:!this.state.isCapture})}},{key:"toggleInfo",value:function(){this.setState({isInfo:!this.state.isInfo})}},{key:"clearPhoto",value:function(){var e=this;setTimeout(function(){e.setState({screenshot:""})},2e3)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOpen,a=t.isInfo,o=t.isSupported,i=t.screenshot;return c.a.createElement("div",{className:"recorder-container"},c.a.createElement("video",{className:"camera-video ".concat(n?"active":""),ref:"cameraVideo",autoPlay:!0}),c.a.createElement("canvas",{className:"camera-canvas ".concat(n?"active":""),ref:"cameraCanvas"}),n?c.a.createElement("div",{className:"icon-close",onClick:function(){return e.closeCamera()}}):c.a.createElement("div",{className:"icon-open",onClick:function(){return e.openCamera()}}),n?c.a.createElement("div",{className:"icon-capture",onClick:function(){return e.captureCamera()}}):"",o?"":c.a.createElement("div",{className:"feature-info ".concat(a?"active":""),onClick:function(){return e.toggleInfo()}},c.a.createElement("div",null,"Enable FaceDetector"),c.a.createElement("div",null,"Please Copy and Visit The URL Below:"),c.a.createElement("div",null,c.a.createElement("code",null,"chrome://flags/#enable-experimental-web-platform-features"))),c.a.createElement("a",{className:"save-btn ".concat(i?"active":""),href:i,download:"mr-beard.png"},c.a.createElement("img",{src:i,alt:"mr-beard.png",onClick:function(){return e.clearPhoto()}})))}}]),t}(a.Component),p=(n(17),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isExpanded:!1,beards:[{x:0,y:2},{x:-74,y:2},{x:0,y:-33},{x:-74,y:-33},{x:0,y:-67},{x:-74,y:-67},{x:0,y:-101},{x:-74,y:-104},{x:0,y:-138},{x:-74,y:-138},{x:-2,y:-173}],current:0},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"toggleExpand",value:function(){this.setState({isExpanded:!this.state.isExpanded})}},{key:"selectBeard",value:function(e){this.setState({current:e}),this.props.onChange(this.state.beards[e])}},{key:"render",value:function(){var e=this,t=this.state,n=t.isExpanded,a=t.beards,o=t.current;return c.a.createElement("div",{className:"chooser-container ".concat(n?"expanded":"")},c.a.createElement("div",{className:"chooser-title",onClick:function(){return e.toggleExpand()}},n?"Hide Options":"Choose A Beard"),c.a.createElement("ul",{className:"deco-list"},a.map(function(t,n){return c.a.createElement("li",{key:n,className:"deco-item ".concat(o===n?"current":""),style:{backgroundPosition:"".concat(t.x,"px ").concat(t.y,"px")},onClick:function(){return e.selectBeard(n)}})})))}}]),t}(a.Component)),g=(n(19),function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={beard:{x:0,y:0}},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"App"},c.a.createElement(v,{beard:this.state.beard}),c.a.createElement(p,{onChange:function(t){return e.setState({beard:t})}}))}}]),t}(a.Component)),w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(21);i.a.render(c.a.createElement(g,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/mr-beard",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/mr-beard","/service-worker.js");w?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):b(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):b(t,e)})}}()}],[[9,2,1]]]);
//# sourceMappingURL=main.806db36c.chunk.js.map