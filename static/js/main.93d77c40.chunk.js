(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n.p+"static/media/hat-3.6bcf11cf.png"},,,function(e,t,n){e.exports=n.p+"static/media/hat-1.a5c3d008.png"},function(e,t,n){e.exports=n.p+"static/media/hat-2.1ffeba0e.png"},function(e,t,n){e.exports=n(25)},,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(8),c=n.n(o),r=n(1),s=n(2),l=n(4),u=n(3),d=n(5),h=(n(17),n(6)),f=n.n(h),m=new Image;m.src=f.a;var v=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1,isInfo:!1,isSupported:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.mediaStream=null,this.faceDetector=window.FaceDetector?new window.FaceDetector:null,this.video=this.refs.cameraVideo,this.canvas=this.refs.cameraCanvas,this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.setState({isSupported:this.faceDetector})}},{key:"openCamera",value:function(){var e=this,t=window,n={audio:!1,video:{facingMode:"user",width:t.innerWidth,height:t.innerHeight}};window.navigator.mediaDevices.getUserMedia(n).then(function(t){var n=e.video;n.onloadedmetadata=function(){n.play(),requestAnimationFrame(function(){return e.detectFace()})},n.srcObject=t,e.setState({isOpen:!0}),e.mediaStream=t}).catch(function(e){console.log("".concat(e.name,": ").concat(e.message))})}},{key:"detectFace",value:function(){var e=this;this.faceDetector&&this.faceDetector.detect(this.refs.cameraVideo).then(function(t){var n=e.canvas,a=e.ctx;console.log(e.ctx),a.clearRect(0,0,n.width,n.height),t.forEach(function(e){var t=e.boundingBox,n=t.width,i=t.height,o=t.top,c=t.left,r=.4*n;a.drawImage(m,c+n/2-r/2,o-r-i/4,r,r)}),e.state.isOpen&&requestAnimationFrame(function(){return e.detectFace()})}).catch(function(e){console.log("".concat(e.name,": ").concat(e.message))})}},{key:"closeCamera",value:function(){this.mediaStream&&(this.mediaStream.getTracks().forEach(function(e){return e.stop()}),this.setState({isOpen:!1}))}},{key:"toggleInfo",value:function(){this.setState({isInfo:!this.state.isInfo})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOpen,a=t.isInfo,o=t.isSupported;return i.a.createElement("div",{className:"recorder-container"},i.a.createElement("video",{className:"camera-video ".concat(n?"active":""),ref:"cameraVideo",autoPlay:!0}),i.a.createElement("canvas",{className:"camera-canvas ".concat(n?"active":""),ref:"cameraCanvas"}),n?i.a.createElement("div",{className:"icon-close",onClick:function(){return e.closeCamera()}}):i.a.createElement("div",{className:"icon-open",onClick:function(){return e.openCamera()}}),o?"":i.a.createElement("div",{className:"feature-info ".concat(a?"active":""),onClick:function(){return e.toggleInfo()}},i.a.createElement("div",null,"Enable FaceDetector"),i.a.createElement("div",null,"Please Copy and Visit The URL Below:"),i.a.createElement("div",null,i.a.createElement("code",null,"chrome://flags/#enable-experimental-web-platform-features"))))}}]),t}(a.Component),p=(n(19),n(9)),g=n.n(p),w=n(10),b=n.n(w),E=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isExpanded:!1,hatImages:[g.a,b.a,f.a]},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"toggleExpand",value:function(){this.setState({isExpanded:!this.state.isExpanded})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isExpanded,a=t.hatImages;return i.a.createElement("div",{className:"chooser-container ".concat(n?"expanded":"")},i.a.createElement("div",{className:"chooser-title",onClick:function(){return e.toggleExpand()}},n?"Hide Options":"Choose A Hat"),i.a.createElement("ul",{className:"hat-list"},a.map(function(e){return i.a.createElement("li",{className:"hat-item",key:e},i.a.createElement("img",{src:e,alt:""}))})))}}]),t}(a.Component),k=(n(21),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(v,null),i.a.createElement(E,null))}}]),t}(a.Component)),O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(23);c.a.render(i.a.createElement(k,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/mr-hat",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/mr-hat","/service-worker.js");O?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):y(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):y(t,e)})}}()}],[[11,2,1]]]);
//# sourceMappingURL=main.93d77c40.chunk.js.map